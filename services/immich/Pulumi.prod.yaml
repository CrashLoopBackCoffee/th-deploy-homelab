environment:
  - kubernetes/kubeconfig-prod
  - kubernetes/postgres-backup-prod

config:
  immich:config:
    cloudflare:
      api-key:
        ref: op://Pulumi/Cloudflare Global API Key/password
      email: tobias_henkel@gmx.de
      zone: tobiash.net
    immich:
      # renovate: datasource=github-releases packageName=immich-app/immich versioning=semver
      version: 2.5.6
      # renovate: datasource=github-releases packageName=immich-app/immich-charts extractVersion=^immich-(?<version>.*)$ versioning=semver
      chart-version: "0.10.3"
      persistence:
        library:
          nfs-server: synology.tobiash.net
          nfs-path: /volume2/photo/immich
          nfs-mount-options: "nfsvers=4.1,sec=sys"
          size: "100Gi"
        handy:
          nfs-server: synology.tobiash.net
          nfs-path: /volume2/photo/Handy
          nfs-mount-options: "nfsvers=4.1,sec=sys"
          size: "10Gi"
        bilder:
          nfs-server: synology.tobiash.net
          nfs-path: /volume2/photo/Bilder
          nfs-mount-options: "nfsvers=4.1,sec=sys"
          size: "10Gi"
      preload-model: ViT-SO400M-16-SigLIP2-384__webli
      resources:
        server:
          cpu: 11m
          memory: 835Mi
        machine-learning:
          cpu: 10m
          memory: 6093Mi
        valkey:
          cpu: 10m
          memory: 100Mi
    postgres:
      # renovate: datasource=endoflife-date packageName=postgresql versioning=loose
      version: "18.1"
      # renovate: datasource=github-releases packageName=tensorchord/VectorChord versioning=loose
      vectorchord-version: "1.0.0"
      backup:
        cron-schedule: "0 0 0 * * *"
