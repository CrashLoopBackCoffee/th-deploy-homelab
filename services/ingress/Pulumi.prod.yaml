environment:
  - kubernetes/kubeconfig-prod

config:
  ingress:config:
    cloudflare:
      api-key:
        ref: op://Pulumi/Cloudflare Global API Key/password
      email: tobias_henkel@gmx.de
      zone: tobiash.net

    cloudflared:
      # renovate: datasource=github-releases packageName=cloudflare/cloudflared versioning=semver
      version: 2026.2.0
      resources:
        cpu: 10m
        memory: 100Mi
      ingress:
        # Grafana
        - service: https://grafana.grafana
          hostname: grafana.tobiash.net
          set-origin-server-name: true

        # Immich
        - service: http://immich-server.immich:2283
          hostname: immich.tobiash.net

        # Strava Sensor
        - service: http://strava-sensor.strava-sensor:8000
          hostname: strava-sensor.tobiash.net

    local-cloudflared:
      - service: http://localhost:8000
        hostname: strava-sensor-dev.tobiash.net

    synology:
      host: synology.tobiash.net
      port: 5001
      scheme: https
      username:
        ref: op://Pulumi/Synology cert-manager/username
      password:
        ref: op://Pulumi/Synology cert-manager/password
      certs:
        - hostname: alloy-legacy.tobiash.net
        - hostname: minio-console.tobiash.net
        - hostname: netboot.tobiash.net
        - hostname: s3.tobiash.net
        - hostname: synology.tobiash.net
